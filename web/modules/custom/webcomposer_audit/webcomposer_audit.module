<?php

/**
 * @file
 * Contains webcomposer_audit.module.
 */

use Drupal\Core\Entity\EntityInterface;

/**
 * Entity Hooks
 *
 */

/**
 *
 */
function webcomposer_audit_entity_update(EntityInterface $entity) {
  try {
    \Drupal::service('webcomposer_audit.database_storage')->update($entity);
  } catch (\Exception $e) {
    // do nothing
  }
}

/**
 *
 */
function webcomposer_audit_entity_insert(EntityInterface $entity) {
  try {
    \Drupal::service('webcomposer_audit.database_storage')->insert($entity);
  } catch (\Exception $e) {
    // do nothing
  }
}

/**
 *
 */
function webcomposer_audit_entity_delete(EntityInterface $entity) {
  try {
    \Drupal::service('webcomposer_audit.database_storage')->delete($entity);
  } catch (\Exception $e) {
    // do nothing
  }
}

/**
 * Config Hooks
 *
 */

/**
 *
 */
function webcomposer_audit_webcomposer_config_schema_insert($name, $data) {
  $entity = new \Drupal\webcomposer_audit\Entity\RawEntity($name, $data);

  try {
    \Drupal::service('webcomposer_audit.database_storage')->insert($entity);
  } catch (\Exception $e) {
    // do nothing
  }
}

/**
 *
 */
function webcomposer_audit_webcomposer_config_schema_update($name, $data, $before) {
  $entity = new \Drupal\webcomposer_audit\Entity\RawEntity($name, $data);
  $entity->setOriginal(new \Drupal\webcomposer_audit\Entity\RawEntity($name, $before));

  try {
    \Drupal::service('webcomposer_audit.database_storage')->update($entity);
  } catch (\Exception $e) {
    // do nothing
  }
}

/**
 *
 */
function webcomposer_audit_webcomposer_config_schema_translate($name, $data, $before) {
  $entity = new \Drupal\webcomposer_audit\Entity\RawEntity($name, $data);
  $entity->setOriginal(new \Drupal\webcomposer_audit\Entity\RawEntity($name, $before));

  try {
    \Drupal::service('webcomposer_audit.database_storage')->update($entity);
  } catch (\Exception $e) {
    // do nothing
  }
}
